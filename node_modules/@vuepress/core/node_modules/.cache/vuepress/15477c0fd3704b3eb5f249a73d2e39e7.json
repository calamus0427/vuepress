{"remainingRequest":"/Users/calamus/calamus/my-project/vue-press/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/calamus/calamus/my-project/vue-press/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/calamus/calamus/my-project/vue-press/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/calamus/calamus/my-project/vue-press/node_modules/vuepress-theme-yubisaki/package/comment/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/calamus/calamus/my-project/vue-press/node_modules/vuepress-theme-yubisaki/package/comment/index.vue","mtime":499162500000},{"path":"/Users/calamus/calamus/my-project/vue-press/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/calamus/calamus/my-project/vue-press/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/calamus/calamus/my-project/vue-press/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/calamus/calamus/my-project/vue-press/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.array.map\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Mixin from './mixin';\nimport { GT_COMMENT, GT_ACCESS_TOKEN } from './const';\nimport { queryParse, queryStringify, axiosJSON, axiosGithub, getMetaContent, formatErrorMsg, hasClassInParent } from './util';\nimport Svg from './components/Svg';\nimport Button from './components/Button';\nimport Action from './components/Action';\nimport Comment from './components/Comment';\nexport default {\n  mixins: [Mixin],\n  components: {\n    SvgSpiner: Svg,\n    Button: Button,\n    Comment: Comment,\n    Action: Action\n  },\n  computed: {\n    isDesc: function isDesc() {\n      return this.pagerDirection === 'last';\n    },\n    totalComments: function totalComments() {\n      var c = this.comments.concat([]);\n\n      if (this.isDesc && this.accessToken) {\n        c.reverse();\n      }\n\n      return c;\n    },\n    storedComment: function storedComment() {\n      return localStorage.getItem(GT_COMMENT);\n    },\n    editOrPreview: function editOrPreview() {\n      return this.isPreview ? this.i18n.t('edit') : this.i18n.t('preview');\n    },\n    containerClass: function containerClass() {\n      return ['gt-container', {\n        'gt-input-focused': this.isInputFocused\n      }];\n    },\n    contentClasses: function contentClasses() {\n      return ['gt-header-textarea', {\n        hide: this.isPreview\n      }];\n    },\n    previewClasses: function previewClasses() {\n      return ['gt-header-preview', 'markdown-body', {\n        hide: !this.isPreview\n      }];\n    },\n    descClasses: function descClasses() {\n      return ['gt-action', 'gt-action-sortdesc', {\n        'is--active': this.isDesc\n      }];\n    },\n    ascClasses: function ascClasses() {\n      return ['gt-action', 'gt-action-sortasc', {\n        'is--active': !this.isDesc\n      }];\n    },\n    userInnerClass: function userInnerClass() {\n      return ['gt-user-inner', {\n        'is--poping': this.isPopupVisible\n      }];\n    }\n  },\n  methods: {\n    countHtml: function countHtml() {\n      return this.i18n.t('counts', {\n        counts: \"<a class=\\\"gt-link gt-link-counts\\\" href=\\\"\".concat(this.issue && this.issue.html_url, \"\\\" target=\\\"_blank\\\">\").concat(this.count(), \"</a>\"),\n        smart_count: this.count()\n      });\n    },\n    noInitHtml: function noInitHtml() {\n      var _this$options = this.options,\n          owner = _this$options.owner,\n          repo = _this$options.repo;\n      return this.i18n.t('no-found-related', {\n        link: \"<a href=\\\"https://github.com/\".concat(owner, \"/\").concat(repo, \"/issues\\\">Issues</a>\")\n      });\n    },\n    concatAuthorHtml: function concatAuthorHtml() {\n      var _this$options2 = this.options,\n          owner = _this$options2.owner,\n          repo = _this$options2.repo,\n          admin = _this$options2.admin;\n      return this.i18n.t('please-contact', {\n        user: [].concat(admin).map(function (u) {\n          return \"@\".concat(u);\n        }).join(' ')\n      });\n    },\n    count: function count() {\n      var user = this.user,\n          issue = this.issue,\n          isPopupVisible = this.isPopupVisible,\n          pagerDirection = this.pagerDirection,\n          localComments = this.localComments;\n      var cnt = (issue && issue.comments) + localComments.length;\n      var isDesc = pagerDirection === 'last';\n      var updateCountCallback = this.options.updateCountCallback;\n\n      if (updateCountCallback && Object.toString.call(updateCountCallback) === '[object Function]') {\n        try {\n          updateCountCallback(cnt);\n        } catch (err) {\n          console.log('An error occurred executing the updateCountCallback:', err);\n        }\n      }\n\n      return cnt;\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div :class=\"containerClass\">\n    <!-- 初始化 loading -->\n    <div class=\"gt-initing\" v-if=\"isIniting\">\n      <i class=\"gt-loader\"/>\n      <p class=\"gt-initing-text\">{{i18n.t('init')}}</p>\n    </div>\n    <!-- meta -->\n    <div class=\"gt-meta\" key=\"meta\" v-if=\"!isIniting && !isNoInit\">\n      <span class=\"gt-counts\" v-html=\"countHtml()\"></span>\n      <!-- popup -->\n      <div class=\"gt-popup\" v-if=\"isPopupVisible\">\n        <Action\n          v-if=\"user\"\n          @click=\"handleSort('first')\"\n          :class=\"ascClasses\" \n          :text=\"i18n.t('sort-asc')\"/>\n        <Action\n          v-if=\"user\"\n          @click=\"handleSort('last')\"\n          :class=\"descClasses\" \n          :text=\"i18n.t('sort-desc')\"/>\n        <Action \n          v-if=\"user\"\n          class='gt-action-logout'\n          @click=\"handleLogout\"\n          :text=\"i18n.t('logout')\"/>\n        <a v-else class=\"gt-action gt-action-login\" @click=\"handleLogin\">\n          {{i18n.t('login-with-github')}}\n        </a>\n        <div class=\"gt-copyright\">\n          <a \n            class=\"gt-link gt-link-project\" href=\"https://github.com/gitalk/gitalk\" \n            target=\"_blank\">\n            Gitalk\n          </a>\n        </div>\n      </div>\n      <div class=\"gt-user\">\n        <div \n          v-if=\"user\" \n          :class='userInnerClass' \n          @click.stop.prevent=\"handlePopup\">\n          <span class=\"gt-user-name\">{{user.login}}</span>\n          <SvgSpiner class=\"gt-ico-arrdown\" name=\"arrow_down\"/>\n        </div>\n        <div \n          v-else \n          :class='userInnerClass'\n          @click.stop.prevent=\"handlePopup\">\n          <span class=\"gt-user-name\">{{i18n.t('anonymous')}}</span>\n          <SvgSpiner class=\"gt-ico-arrdown\" name=\"arrow_down\"/>\n        </div>\n      </div>\n    </div>\n    <!-- error msg -->\n    <div class=\"gt-error\" v-if=\"isOccurError\">\n      {{errorMsg}}\n    </div>\n    <!-- 初始化失败 -->\n    <div class=\"gt-no-init\" key=\"no-init\" v-if=\"!isIniting && isNoInit\">\n      <p v-html=\"noInitHtml()\"></p>\n      <p v-html=\"concatAuthorHtml()\"></p>\n      <p v-if=\"isAdmin\">\n        <Button @click=\"handleIssueCreate\" :isLoading=\"isIssueCreating\">\n            <span class=\"gt-btn-text\">{{i18n.t('init-issue')}}</span>\n        </Button>\n      </p>\n      <Button \n        v-if=\"!user\"\n        class=\"gt-btn-login\" \n        @click=\"handleLogin\">\n        <span class=\"gt-btn-text\">{{i18n.t('login-with-github')}}</span>\n      </Button>\n    </div>\n    <!-- 初始化成功 -->\n    <div v-else>\n      <!-- header -->\n      <div class=\"gt-header\" key=\"header\">\n        <div v-if=\"user\" class=\"gt-avatar gt-header-avatar\">\n          <img :src=\"user.avatar_url\" alt=\"avatar\">\n        </div>\n        <a v-else class=\"gt-avatar-github\" @click=\"handleLogin\">\n          <SvgSpiner class=\"gt-ico-github\" name=\"github\"/>\n        </a>\n        <div class=\"gt-header-comment\">\n          <textarea\n            ref=\"commentEL\"\n            :class=\"contentClasses\"\n            v-model=\"comment\"\n            @focus=\"handleCommentFocus\"\n            @blur=\"handleCommentBlur\"\n            @keydown.meta.enter=\"handleCommentKeyDown\"\n            @keydown.ctrl.enter=\"handleCommentKeyDown\"\n            :placeholder=\"i18n.t('leave-a-comment')\"\n          />\n          <div :class=\"previewClasses\" v-html=\"previewHtml\" />\n          <!-- comment action area -->\n          <div class=\"gt-header-controls\">\n            <a \n              class=\"gt-header-controls-tip\" \n              href=\"https://guides.github.com/features/mastering-markdown/\" \n              target=\"_blank\">\n              <SvgSpiner \n                class=\"gt-ico-tip\" \n                name=\"tip\" \n                :text=\"i18n.t('support-markdown')\"/>\n            </a>\n            <Button\n              v-if=\"user\"\n              class=\"gt-btn-public\"\n              @click=\"handleCommentCreate\"\n              :isLoading=\"isCreating\">\n                <span class=\"gt-btn-text\">{{i18n.t('comment')}}</span>\n            </Button>\n            <Button\n              class=\"gt-btn-preview\"\n              @click=\"handleCommentPreview\">\n              <span class=\"gt-btn-text\">{{editOrPreview}}</span>\n            </Button>\n            <Button \n              v-if=\"!user\"\n              class=\"gt-btn-login\" \n              @click=\"handleLogin\">\n              <span class=\"gt-btn-text\">{{i18n.t('login-with-github')}}</span>    \n            </Button>\n          </div>\n        </div>\n      </div>\n      <!-- comments list -->\n      <div class=\"gt-comments\" key=\"comments\">\n        <transition-group name=\"flip-list\">\n          <Comment \n            v-for=\"c in totalComments\" \n            :comment=\"c\"\n            :key=\"c.id\"\n            :user=\"user\"\n            :language=\"options.language\"\n            :commentedText=\"i18n.t('commented')\"\n            :admin=\"options.admin\"\n            @like=\"like\"\n            @unlike=\"unLike\"\n            @reply=\"reply\" />\n        </transition-group>\n          \n        <p v-if=\"!totalComments.length\" class=\"gt-comments-null\">\n            {{i18n.t('first-comment-person')}}\n        </p>\n        <div \n          v-if=\"!isLoadOver && totalComments.length\" \n          class=\"gt-comments-controls\">\n          <Button \n            class=\"gt-btn-loadmore\" \n            @click=\"handleCommentLoad\" \n            :isLoading=\"isLoadMore\">\n            <span class=\"gt-btn-text\">{{i18n.t('load-more')}}</span>    \n          </Button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Mixin from './mixin';\nimport { GT_COMMENT, GT_ACCESS_TOKEN } from './const';\nimport {\n  queryParse,\n  queryStringify,\n  axiosJSON,\n  axiosGithub,\n  getMetaContent,\n  formatErrorMsg,\n  hasClassInParent\n} from './util';\n\nimport Svg from './components/Svg';\nimport Button from './components/Button';\nimport Action from './components/Action';\nimport Comment from './components/Comment';\n\nexport default {\n  mixins: [Mixin],\n  components: {\n    SvgSpiner: Svg,\n    Button,\n    Comment,\n    Action\n  },\n  computed: {\n    isDesc() {\n      return this.pagerDirection === 'last';\n    },\n    totalComments() {\n      const c = this.comments.concat([]);\n      if (this.isDesc && this.accessToken) {\n        c.reverse();\n      }\n      return c;\n    },\n    storedComment() {\n      return localStorage.getItem(GT_COMMENT);\n    },\n    editOrPreview() {\n      return this.isPreview ? this.i18n.t('edit') : this.i18n.t('preview');\n    },\n    containerClass() {\n      return [\n        'gt-container',\n        {\n          'gt-input-focused': this.isInputFocused\n        }\n      ];\n    },\n    contentClasses() {\n      return [\n        'gt-header-textarea',\n        {\n          hide: this.isPreview\n        }\n      ];\n    },\n    previewClasses() {\n      return [\n        'gt-header-preview',\n        'markdown-body',\n        {\n          hide: !this.isPreview\n        }\n      ];\n    },\n    descClasses() {\n      return [\n        'gt-action',\n        'gt-action-sortdesc',\n        {\n          'is--active': this.isDesc\n        }\n      ];\n    },\n    ascClasses() {\n      return [\n        'gt-action',\n        'gt-action-sortasc',\n        {\n          'is--active': !this.isDesc\n        }\n      ];\n    },\n    userInnerClass() {\n      return [\n        'gt-user-inner',\n        {\n          'is--poping': this.isPopupVisible\n        }\n      ];\n    }\n  },\n  methods: {\n    countHtml() {\n      return this.i18n.t('counts', {\n        counts: `<a class=\"gt-link gt-link-counts\" href=\"${this.issue &&\n          this.issue.html_url}\" target=\"_blank\">${this.count()}</a>`,\n        smart_count: this.count()\n      });\n    },\n    noInitHtml() {\n      const { owner, repo } = this.options;\n\n      return this.i18n.t('no-found-related', {\n        link: `<a href=\"https://github.com/${owner}/${repo}/issues\">Issues</a>`\n      });\n    },\n    concatAuthorHtml() {\n      const { owner, repo, admin } = this.options;\n      return this.i18n.t('please-contact', {\n        user: []\n          .concat(admin)\n          .map(u => `@${u}`)\n          .join(' ')\n      });\n    },\n    count() {\n      const {\n        user,\n        issue,\n        isPopupVisible,\n        pagerDirection,\n        localComments\n      } = this;\n      const cnt = (issue && issue.comments) + localComments.length;\n      const isDesc = pagerDirection === 'last';\n      const { updateCountCallback } = this.options;\n\n      if (\n        updateCountCallback &&\n        Object.toString.call(updateCountCallback) === '[object Function]'\n      ) {\n        try {\n          updateCountCallback(cnt);\n        } catch (err) {\n          console.log(\n            'An error occurred executing the updateCountCallback:',\n            err\n          );\n        }\n      }\n\n      return cnt;\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\" src=\"./index.styl\"></style>\n<style lang=\"stylus\">\n.flip-list-move {\n  transition: transform 1s;\n}\n</style>\n\n"],"sourceRoot":"node_modules/vuepress-theme-yubisaki/package/comment"}]}